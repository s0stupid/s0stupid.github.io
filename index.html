<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ACCESS GATE</title>

<style>
body{
    background:black;
    color:white;
    font-family:monospace;
    font-size:18px;
    padding:40px;
}

#output{
    white-space:pre-line;
    margin-bottom:20px;
}

#answer{
    background:black;
    color:white;
    border:1px solid white;
    padding:5px;
    font-family:monospace;
    display:none;
}

#error{
    color:red;
    margin-top:10px;
}
</style>

</head>
<body>

<div id="output"></div>

<input id="answer" type="text" autocomplete="off">

<div id="error"></div>

<script>


const birthday = "0221";

const validNames = [
"shin",
"sin",
"stupid",
"r233222"
];


const output = document.getElementById("output");
const input = document.getElementById("answer");
const error = document.getElementById("error");

if(!input){
    console.error("input element not found");
}

function typeLine(text, callback){
    let i = 0;

    const interval = setInterval(()=>{

        output.innerHTML += text[i];

        i++;

        if(i >= text.length){

            clearInterval(interval);

            output.innerHTML += "<br>";

            if(callback) callback();

        }

    }, 30);

}

function start(){

    typeLine("INITIALIZING SYSTEM...", ()=>{
    typeLine("USER DETECTED.", ()=>{
    typeLine("IDENTITY VERIFICATION REQUIRED.", ()=>{
    typeLine("", ()=>{
    typeLine("QUESTION 1:", ()=>{
    typeLine("ENTER BIRTHDAY (4 DIGITS)", ()=>{

        input.style.display = "inline";
        input.focus();

    });
    });
    });
    });
    });

}

let stage = 0;

input.addEventListener("keydown", function(e){

    if(e.key !== "Enter") return;

    const value = input.value.trim();

    if(stage === 0){

        if(value === birthday){

            error.innerHTML = "";

            output.innerHTML += "> " + value + "<br>";

            stage = 1;

            typeLine("", ()=>{
            typeLine("QUESTION 2:", ()=>{
            typeLine("ENTER NAME");
            });
            });

        }
        else{

            error.innerHTML = "ACCESS DENIED";

        }

    }
    else if(stage === 1){

        const lowerNames = validNames.map(n => n.toLowerCase());

        if(lowerNames.includes(value.toLowerCase())){

            error.innerHTML = "";

            output.innerHTML += "> " + value + "<br>";

            typeLine("", ()=>{
            typeLine("ACCESS GRANTED", ()=>{

                setTimeout(()=>{

                    window.location.href = "main.html";

                }, 1000);

            });
            });

        }
        else{

            error.innerHTML = "ACCESS DENIED";

        }

    }

    input.value = "";

});


start();

</script>

</body>
</html>
