<script>

const introLines = [
"INITIALIZING SYSTEM...",
"USER DETECTED.",
"IDENTITY VERIFICATION REQUIRED.",
"",
"QUESTION 1:",
"ENTER BIRTHDAY (4 DIGITS)"
];

// ðŸ”§ ìƒì¼
const birthday = "0221";

// ðŸ”§ í—ˆìš©í•  ì´ë¦„ë“¤ ì—¬ëŸ¬ ê°œ ì¶”ê°€ ê°€ëŠ¥
const validNames = [
"stupid",
"sin",
"shin",
"r233222"
];

let questionIndex = 0;

const output = document.getElementById("output");
const input = document.getElementById("answer");
const error = document.getElementById("error");

function typeLine(text, callback){
    let i = 0;
    const interval = setInterval(()=>{
        output.innerHTML += text[i];
        i++;
        if(i >= text.length){
            clearInterval(interval);
            output.innerHTML += "\n";
            if(callback) callback();
        }
    }, 30);
}

function typeIntro(){
    let i = 0;
    function next(){
        if(i < introLines.length){
            typeLine(introLines[i], ()=>{
                i++;
                next();
            });
        }else{
            input.style.display = "inline";
            input.focus();
        }
    }
    next();
}

input.addEventListener("keydown", function(e){

    if(e.key === "Enter"){

        const value = input.value.trim();

        if(questionIndex === 0){

            if(value === birthday){

                error.innerHTML = "";
                output.innerHTML += "> " + value + "\n";

                questionIndex++;

                typeLine("");
                typeLine("QUESTION 2:");
                typeLine("ENTER NAME");

            }else{

                error.innerHTML = "ACCESS DENIED";

            }

        }else if(questionIndex === 1){

            // ðŸ”§ ì´ë¦„ ë°°ì—´ì—ì„œ ê²€ì‚¬ (ëŒ€ì†Œë¬¸ìž ë¬´ì‹œ)
            const lowerNames = validNames.map(n => n.toLowerCase());

            if(lowerNames.includes(value.toLowerCase())){

                error.innerHTML = "";
                output.innerHTML += "> " + value + "\n";

                typeLine("");
                typeLine("ACCESS GRANTED", ()=>{
                    setTimeout(()=>{
                        window.location.href = "main.html";
                    }, 1000);
                });

            }else{

                error.innerHTML = "ACCESS DENIED";

            }

        }

        input.value = "";

    }

});

typeIntro();

</script>
